

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Windows as Guest VM on ACRN &mdash; Project ACRN™ v 1.2-unstable documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/ACRN-favicon-32x32.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'v 1.2-unstable',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/acrn-custom.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/acrn-custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using PREEMPT_RT-Linux for real-time UOS" href="rt_linux.html" />
    <link rel="prev" title="Using VxWorks* as User OS" href="using_vxworks_as_uos.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Project ACRN™
          

          
            
            <img src="../_static/ACRN_Logo_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Project ACRN</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Versions</dt>
        
          <dd><a href="/latest/">latest</a></dd>
        
          <dd><a href="/1.1/">1.1</a></dd>
        
          <dd><a href="/1.0/">1.0</a></dd>
        
          <dd><a href="/0.8/">0.8</a></dd>
        
          <dd><a href="/0.7/">0.7</a></dd>
        
      </dl>
      <dl>
        <dt>projectacrn.org links</dt>
          <dd>
            <a href="https://www.projectacrn.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/projectacrn/acrn-hypervisor/wiki">Wiki</a>
          </dd>
      </dl>
    </div>
  </div>
  
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Documentation Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learn.html">Learn about ACRN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html">Introduction to Project ACRN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#automotive-use-case-example">Automotive Use Case Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#licensing">Licensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#acrn-device-model-service-os-and-user-os">ACRN Device Model, Service OS, and User OS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#boot-sequence">Boot Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#acrn-hypervisor-architecture">ACRN Hypervisor Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#acrn-device-model-architecture">ACRN Device Model Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#device-pass-through">Device pass through</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../introduction/index.html#hardware-support-for-device-passthrough">Hardware support for device passthrough</a></li>
<li class="toctree-l4"><a class="reference internal" href="../introduction/index.html#hypervisor-support-for-device-passthrough">Hypervisor support for device passthrough</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#acrn-i-o-mediator">ACRN I/O mediator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#virtio-framework-architecture">Virtio framework architecture</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../try.html">Try using ACRN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware.html">Supported Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware.html#intel-apollo-lake-nuc">Intel Apollo Lake NUC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware.html#intel-kaby-lake-nuc">Intel Kaby Lake NUC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware.html#up-squared-board">UP Squared board</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/apl-nuc.html">Getting started guide for Intel NUC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/apl-nuc.html#hardware-setup">Hardware setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#connecting-to-the-serial-port">Connecting to the serial port</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#firmware-update-on-the-nuc">Firmware update on the NUC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/apl-nuc.html#software-setup">Software setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#set-up-a-clear-linux-operating-system">Set up a Clear Linux Operating System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#use-the-script-to-set-up-acrn-automatically">Use the script to set up ACRN automatically</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#manual-setup-acrn-guide">Manual setup ACRN guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#add-the-acrn-hypervisor-to-the-efi-partition">Add the ACRN hypervisor to the EFI Partition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#acrn-network-bridge">ACRN Network Bridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/apl-nuc.html#set-up-reference-uos">Set up Reference UOS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/up2.html">Getting started guide for UP2 board</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/up2.html#hardware-setup">Hardware setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/up2.html#connecting-to-the-serial-port">Connecting to the serial port</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/up2.html#software-setup">Software setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/up2.html#up2-serial-port-setting">UP2 serial port setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/up2.html#up2-block-device">UP2 block device</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/up2.html#running-the-hypervisor">Running the hypervisor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/building-from-source.html">Build ACRN from Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/building-from-source.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/building-from-source.html#install-build-tools-and-dependencies">Install build tools and dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/building-from-source.html#build-the-hypervisor-device-model-and-tools">Build the hypervisor, device model and tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/building-from-source.html#configuring-the-hypervisor">Configuring the hypervisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/building-from-source.html#modify-the-hypervisor-configurations">Modify the hypervisor configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/building-from-source.html#create-a-new-default-configuration">Create a new default configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../develop.html">Develop using ACRN</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../develop.html#configuration-tools">Configuration Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../develop.html#configuration-tutorials">Configuration Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="increase-uos-disk-size.html">Increasing the User OS disk size</a><ul>
<li class="toctree-l4"><a class="reference internal" href="increase-uos-disk-size.html#increase-the-virtual-disk-size">Increase the virtual disk size</a></li>
<li class="toctree-l4"><a class="reference internal" href="increase-uos-disk-size.html#resize-the-rootfs-partition">Resize the <code class="docutils literal notranslate"><span class="pre">rootfs</span></code> partition</a></li>
<li class="toctree-l4"><a class="reference internal" href="increase-uos-disk-size.html#resize-the-filesystem">Resize the filesystem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sign_clear_linux_image.html">How to sign binaries of the Clear Linux image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sign_clear_linux_image.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="sign_clear_linux_image.html#steps-to-sign-the-binaries-of-the-clear-linux-image">Steps to sign the binaries of the Clear Linux image</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="static-ip.html">Using a static IP address</a><ul>
<li class="toctree-l4"><a class="reference internal" href="static-ip.html#acrn-network-setup">ACRN Network Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="static-ip.html#setting-up-the-static-ip-address">Setting up the static IP address</a></li>
<li class="toctree-l4"><a class="reference internal" href="static-ip.html#activate-the-new-configuration">Activate the new configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">ACRN Debugging Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="debug.html#acrn-console-command">ACRN Console Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug.html#an-example">An example</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug.html#acrn-log">ACRN Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug.html#acrn-trace">ACRN Trace</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_partition_mode_on_nuc.html">Using partition mode on NUC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_nuc.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_nuc.html#update-kernel-image-and-modules-of-pre-launched-vm">Update kernel image and modules of Pre-launched VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_nuc.html#update-acrn-hypervisor-image">Update ACRN hypervisor Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_nuc.html#update-ubuntu-grub-to-boot-hypervisor-and-load-kernel-image">Update Ubuntu GRUB to Boot hypervisor and Load Kernel Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_nuc.html#logical-partition-scenario-startup-checking">Logical Partition Scenario Startup Checking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_partition_mode_on_up2.html">Using partition mode on UP2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_up2.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_up2.html#build-kernel-and-modules-for-partition-mode-uos">Build kernel and modules for partition mode UOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_up2.html#enable-partition-mode-in-acrn-hypervisor">Enable partition mode in ACRN hypervisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_partition_mode_on_up2.html#switch-between-privileged-vms">Switch between privileged VMs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../develop.html#user-vm-tutorials">User VM Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="using_agl_as_uos.html">Using AGL as the User OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_agl_as_uos.html#introduction-to-agl">Introduction to AGL</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_agl_as_uos.html#steps-for-using-agl-as-the-uos">Steps for using AGL as the UOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_agl_as_uos.html#enable-the-agl-display">Enable the AGL display</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_agl_as_uos.html#follow-up">Follow up</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="agl-vms.html">Running AGL as VMs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="agl-vms.html#hardware-setup">Hardware setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="agl-vms.html#software-setup">Software Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_celadon_as_uos.html">Using Celadon as User OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_celadon_as_uos.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_celadon_as_uos.html#build-celadon-from-source">Build Celadon from source</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_celadon_as_uos.html#steps-for-using-celadon-as-user-os">Steps for Using Celadon as User OS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="building_uos_from_clearlinux.html">Building UOS from Clear Linux OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="building_uos_from_clearlinux.html#build-uos-image-in-clear-linux-os">Build UOS image in Clear Linux OS</a></li>
<li class="toctree-l4"><a class="reference internal" href="building_uos_from_clearlinux.html#start-the-user-os-uos">Start the User OS (UOS)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_vxworks_as_uos.html">Using VxWorks* as User OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_vxworks_as_uos.html#steps-for-using-vxworks-as-user-os">Steps for Using VxWorks as User OS</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using Windows as Guest VM on ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hardware-setup">Hardware setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#acrn-service-vm-setup">ACRN Service VM Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-for-using-windows-as-guest-vm">Setup for Using Windows as Guest VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#acrn-windows-verified-feature-list">ACRN Windows verified feature list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#known-limitations">Known Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-configurations-of-acrn-dm-command-line">Device configurations of acrn-dm command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rt_linux.html">Using PREEMPT_RT-Linux for real-time UOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_zephyr_as_uos.html">Using Zephyr as User OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_zephyr_as_uos.html#introduction-to-zephyr">Introduction to Zephyr</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_zephyr_as_uos.html#steps-for-using-zephyr-as-user-os">Steps for Using Zephyr as User OS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop.html#service-vm-tutorials">Service VM Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="using_ubuntu_as_sos.html">Using Ubuntu as the Service OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#install-ubuntu-natively">Install Ubuntu (natively)</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#install-acrn">Install ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#install-the-service-os-kernel">Install the Service OS kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#prepare-the-user-os-uos">Prepare the User OS (UOS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#start-the-user-os-uos">Start the User OS (UOS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#enabling-network-sharing">Enabling network sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_sos.html#enabling-usb-keyboard-and-mouse">Enabling USB keyboard and mouse</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop.html#enable-acrn-features">Enable ACRN Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="acrn-dm_QoS.html">Enable QoS based on runC container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="acrn-dm_QoS.html#what-is-qos">What is QoS</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-dm_QoS.html#what-is-runc-container">What is runC container</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-dm_QoS.html#acrn-dm-qos-architecture">ACRN-DM QoS architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-dm_QoS.html#acrn-qos-cpu-utilization-example">ACRN-QoS CPU utilization example</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-dm_QoS.html#how-to-use-acrn-dm-qos">How to use ACRN-DM QoS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="open_vswitch.html">How to enable OVS in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="open_vswitch.html#what-is-ovs">What is OVS</a></li>
<li class="toctree-l4"><a class="reference internal" href="open_vswitch.html#why-ovs">Why OVS</a></li>
<li class="toctree-l4"><a class="reference internal" href="open_vswitch.html#enable-ovs-in-acrn">How to enable OVS in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="open_vswitch.html#how-to-use-ovs-bridge">How to use OVS bridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="open_vswitch.html#example-for-vlan-network-based-on-ovs-in-acrn">Example for VLAN network based on OVS in ACRN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rtvm_workload_design_guideline.html">Real time VM application design guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#run-rtvm-with-dedicated-resources-devices">Run RTVM with dedicated resources/devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#rtvm-with-virtio-pmd-polling-mode-driver-for-i-o-sharing">RTVM with virtio PMD (Polling Mode Driver) for I/O sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#rtvm-with-hv-emulated-device">RTVM with HV Emulated Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#dm-emulated-device-except-pmd">DM emulated device (Except PMD)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sgx_virtualization.html">SGX Virtualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sgx_virtualization.html#high-level-acrn-sgx-virtualization-design">High Level ACRN SGX Virtualization Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="sgx_virtualization.html#enable-sgx-support-for-guest">Enable SGX support for Guest</a></li>
<li class="toctree-l4"><a class="reference internal" href="sgx_virtualization.html#sgx-capability-exposure">SGX Capability Exposure</a></li>
<li class="toctree-l4"><a class="reference internal" href="sgx_virtualization.html#enclave-system-function-handling">Enclave System Function Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="sgx_virtualization.html#other-vmexit-control">Other VMExit Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="sgx_virtualization.html#future-development">Future Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skl-nuc.html">GPU Passthrough on Skylake NUC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="skl-nuc.html#hardware-platform">Hardware platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="skl-nuc.html#software-configuration">Software Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="skl-nuc.html#software-setup">Software Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_cat_on_up2.html">Using CAT on UP2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_cat_on_up2.html#cat-support-on-acrn">CAT Support on ACRN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_cat_on_up2.html#tuning-cat-in-hv-debug-shell">Tuning CAT in HV debug shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_cat_on_up2.html#configure-cat-for-vm-with-vm-configuration">Configure CAT for VM with VM Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_sbl_on_up2.html">Using SBL on UP2 Board</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#build-sbl">Build SBL</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#flash-sbl-on-the-up2">Flash SBL on the UP2</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#build-acrn-for-up2">Build ACRN for UP2</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#download-and-install-flash-tool">Download and install flash tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#sos-and-laag-installation">SOS and LaaG Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#boot-to-sos">Boot to SOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_sbl_on_up2.html#launch-uos">Launch UOS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="trustyACRN.html">Trusty and Security Services in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="trustyACRN.html#trusty-architecture">Trusty Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="trustyACRN.html#trusty-services">Trusty Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="trustyACRN.html#trusty-in-acrn">Trusty in ACRN</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to ACRN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html#design-guides">Design Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/modularity.html">ACRN Hypervisor: Modular Design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#principles">Principles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/hld/index.html">High-Level Design Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-hypervisor.html">Hypervisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-devicemodel.html">Device Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-emulated-devices.html">Emulated Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-virtio-devices.html">Virtio Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-vm-management.html">VM Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-power-management.html">Power Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-trace-log.html">Tracing and Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-vsbl.html">Virtual Bootloader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-security.html">Security</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html">Software Design Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html#error-detection-and-error-handling">Error Detection and Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html#module-level-configuration-design-guidelines">Module Level Configuration Design Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/GVT-g-porting.html">GVT-g Enabling and Porting Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/GVT-g-porting.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/GVT-g-porting.html#purpose-of-this-document">Purpose of this document</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/GVT-g-porting.html#overall-components">Overall Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/GVT-g-porting.html#core-scenario-interaction-sequences">Core scenario interaction sequences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/GVT-g-porting.html#api-details">API details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/trusty.html">Trusty TEE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#trusty-architecture">Trusty Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#trusty-specific-hypercalls">Trusty specific Hypercalls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#trusty-boot-flow">Trusty Boot flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#ept-hierarchy">EPT Hierarchy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/l1tf.html">L1 Terminal Fault Mitigation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#l1tf-problem-in-acrn">L1TF Problem in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#l1tf-mitigation-in-acrn">L1TF Mitigation in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#mitigation-recommendations">Mitigation Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#mitigation-status">Mitigation Status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/VBSK-analysis.html">VBS-K Framework Virtualization Overhead Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/VBSK-analysis.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/VBSK-analysis.html#architecture-of-virtio-echo">Architecture of VIRTIO-ECHO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/VBSK-analysis.html#virtualization-overhead-analysis">Virtualization Overhead Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/VBSK-analysis.html#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html#contributing-guides">Contributing Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#repository-layout">Repository layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#submitting-issues">Submitting Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#contribution-tools-and-git-setup">Contribution Tools and Git Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#coding-style">Coding Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#contribution-workflow">Contribution Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#commit-guidelines">Commit Guidelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/coding_guidelines.html">Coding Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/c_coding_guidelines.html">C Programming Language Coding Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/asm_coding_guidelines.html">Assembly Language Coding Guidelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#multi-column-lists">Multi-column lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#file-names-and-commands">File names and Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, spaces, and indenting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#drawings">Drawings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/graphviz.html">Drawings using graphviz</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#simple-directed-graph">Simple directed graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#adding-edge-labels">Adding edge labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#tables">Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#finite-state-machine">Finite-State Machine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="docbuild.html">ACRN documentation generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#documentation-overview">Documentation overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#set-up-the-documentation-working-folders">Set up the documentation working folders</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#installing-the-documentation-tools">Installing the documentation tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#documentation-presentation-theme">Documentation presentation theme</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#running-the-documentation-processors">Running the documentation processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#publishing-content">Publishing content</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#document-versioning">Document Versioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#filtering-expected-warnings">Filtering expected warnings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html#tools">Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html">ACRN-Crashlog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html#building">Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html#installing">Installing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html#enabling-disabling">Enabling/Disabling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/README.html#source-code">Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/README.html">acrnprobe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/README.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/README.html#source-files">Source files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/README.html#configuration-files">Configuration files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/conf.html">acrnprobe Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/conf.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/conf.html#layout">Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/conf.html#properties-of-group-members">Properties of group members</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/conf.html#crash-tree-in-acrnprobe">Crash tree in acrnprobe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/acrnprobe/conf.html#sections">Sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/tools/acrn-crashlog/usercrash/README.html">usercrash</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/usercrash/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/usercrash/README.html#design">Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/usercrash/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrn-crashlog/usercrash/README.html#source-code">Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/tools/acrnlog/README.html">acrnlog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrnlog/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrnlog/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrnlog/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/tools/acrntrace/README.html">acrntrace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrntrace/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrntrace/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/tools/acrntrace/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/acrn-manager/README.html">acrnctl and acrnd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/acrn-manager/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/acrn-manager/README.html#acrnd">acrnd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/acrn-manager/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Developer references</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/hypercall_api.html">Hypercall APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/devicemodel_api.html">Device Model APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/GVT-g_api.html">ACRN GVT-g APIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/GVT-g_api.html#core-driver-infrastructure">Core Driver Infrastructure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/GVT-g_api.html#vhm-apis-called-from-acrngt">VHM APIs called from AcrnGT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/GVT-g_api.html#acrngt-mediated-pass-through-mpt-interface">AcrnGT mediated pass-through (MPT) interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/GVT-g_api.html#gvt-g-intel-gvt-ops-interface">GVT-g intel_gvt_ops interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/GVT-g_api.html#acrngt-sysfs-interface">AcrnGT sysfs interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/kconfig/index.html">Configuration Symbol Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/kconfig/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/kconfig/index.html#supported-options">Supported Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-guides/acrn-shell.html">ACRN Shell Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/acrn-shell.html#command-examples">Command examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#vm-list">vm_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#vcpu-list">vcpu_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#vcpu-dumpreg">vcpu_dumpreg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#dumpmem">dumpmem</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#vm-console">vm_console</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#vioapic">vioapic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#dump-ioapic">dump_ioapic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#pt">pt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#int">int</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#cpuid">cpuid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#rdmsr">rdmsr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#wrmsr">wrmsr</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-guides/kernel-parameters.html">ACRN Kernel Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/kernel-parameters.html#generic-kernel-parameters">Generic kernel parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/kernel-parameters.html#intel-gvt-g-acrngt-parameters">Intel GVT-g (AcrnGT) Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/kernel-parameters.html#gvt-g-acrngt-kernel-options-details">GVT-g (AcrnGT) Kernel Options details</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/kernel-parameters.html#i915-domain-scaler-owner">i915.domain_scaler_owner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/kernel-parameters.html#i915-enable-hangcheck">i915.enable_hangcheck</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-guides/acrn-dm-parameters.html">Device Model Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_1.1.html">ACRN v1.1 (June 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.1.html#version-1-1-major-features">Version 1.1 major features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.1.html#hybrid-mode-introduced">Hybrid Mode Introduced</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.1.html#support-for-new-guest-operating-systems">Support for new guest Operating Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.1.html#document-updates">Document updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.1.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.1.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.1.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.1.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_1.0.html">ACRN v1.0 (May 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.0.html#version-1-0-major-features">Version 1.0 major features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#hardware-support">Hardware Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#apl-up2-board-with-sbl-firmware">APL UP2 board with SBL firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#enable-post-launched-rtvm-support-for-real-time-uos-in-acrn">Enable post-launched RTVM support for real-time UOS in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#enable-cache-qos-with-cat">Enable cache QOS with CAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#enable-qos-based-on-runc-container">Enable QoS based on runC container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#s5-support-for-rtvm">S5 support for RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#ovmf-support-initial-patches-merged-in-acrn">OVMF support initial patches merged in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#support-acpi-power-key-mediator">Support ACPI power key mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#vt-x-vt-d">VT-x, VT-d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#pic-ioapic-msi-msi-x-pci-lapic">PIC/IOAPIC/MSI/MSI-X/PCI/LAPIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#ethernet">Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#mass-storage">Mass Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#usb-xdci">USB (xDCI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#usb-mediator-xhci">USB Mediator (xHCI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#wi-fi">Wi-Fi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#ipu-mipi-csi-2-hdmi-in">IPU (MIPI CSI-2, HDMI-in)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#bluetooth">Bluetooth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#gvt-g-for-acrn">GVT-g for ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#gpu-preemption">GPU - Preemption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#gpu-display-surface-sharing-via-hyper-dma">GPU - display surface sharing via Hyper DMA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#virtio-standard-is-supported">Virtio standard is supported</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#device-pass-through-support">Device pass-through support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#gpio-virtualization">GPIO virtualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#new-acrn-tools">New ACRN tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_1.0.html#document-updates">Document updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.0.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.0.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.0.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_1.0.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.8.html">ACRN v0.8 (Apr 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.8.html#version-0-8-new-features">Version 0.8 new features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.8.html#gpio-virtualization">GPIO virtualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.8.html#enable-qos-based-on-runc-container">Enable QoS based on runC container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.8.html#s5-support-for-rtvm">S5 support for RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.8.html#document-updates">Document updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.8.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.8.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.8.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.8.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.7.html">ACRN v0.7 (Mar 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.7.html#version-0-7-new-features">Version 0.7 new features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.7.html#enable-cache-qos-with-cat">Enable cache QOS with CAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.7.html#support-acpi-power-key-mediator">Support ACPI power key mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.7.html#document-updates">Document updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.7.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.7.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.7.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.7.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.6.html">ACRN v0.6 (Feb 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.6.html#version-0-6-new-features">Version 0.6 new features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.6.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.6.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.6.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.5.html">ACRN v0.5 (Jan 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.5.html#version-0-5-new-features">Version 0.5 new features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.5.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.5.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.5.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.4.html">ACRN v0.4 (Dec 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.4.html#version-0-4-new-features">Version 0.4 new features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.4.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.4.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.4.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.3.html">ACRN v0.3 (Nov 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.3.html#version-0-3-new-features">Version 0.3 new features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.3.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.3.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.3.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.2.html">ACRN v0.2 (Sep 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.2.html#version-0-2-new-features">Version 0.2 new features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#vt-x-vt-d">VT-x, VT-d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#pic-ioapic-msi-msi-x-pci-lapic">PIC/IOAPIC/MSI/MSI-X/PCI/LAPIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#ethernet">Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#storage-emmc">Storage (eMMC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#usb-xdci">USB (xDCI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#usb-mediator-xhci-and-drd">USB Mediator (xHCI and DRD)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#csme">CSME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#wifi">WiFi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#ipu-mipi-cs2-hdmi-in">IPU (MIPI-CS2, HDMI-in)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#bluetooth">Bluetooth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#gpu-preemption">GPU  - Preemption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#gpu-display-surface-sharing-via-hyper-dma">GPU - display surface sharing via Hyper DMA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.2.html#s3">S3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.2.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.2.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.2.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_0.1.html">ACRN v0.1 (July 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.1.html#version-0-1-new-features">Version 0.1 new features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.1.html#hardware-support">Hardware Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.1.html#gvt-g-for-acrn">GVT-g for ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.1.html#virtio-standard-is-supported">Virtio standard is supported</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.1.html#device-pass-through-support">Device pass-through support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.1.html#hypervisor-configuration">Hypervisor configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_0.1.html#new-acrn-tools">New ACRN tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.1.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_0.1.html#change-log">Change Log</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#what-hardware-does-acrn-support">What hardware does ACRN support?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#clear-linux-os-fails-to-boot-on-my-nuc">Clear Linux* OS fails to boot on my NUC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-do-i-configure-acrn-s-memory-use">How do I configure ACRN’s memory use?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-to-modify-the-default-display-output-for-a-uos">How to modify the default display output for a UOS?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#why-does-acrn-need-to-know-how-much-ram-the-system-has">Why does ACRN need to know how much RAM the system has?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-to-build-acrn-on-fedora-29">How to build ACRN on Fedora 29?</a></li>
</ul>
</li>
</ul>

            
          

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Project ACRN™</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../develop.html">Develop using ACRN</a> &raquo;</li>
        
      <li>Using Windows as Guest VM on ACRN</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
  
           <div itemprop="articleBody">
            
  <div class="section" id="using-windows-as-guest-vm-on-acrn">
<span id="using-windows-as-uos"></span><h1>Using Windows as Guest VM on ACRN<a class="headerlink" href="#using-windows-as-guest-vm-on-acrn" title="Permalink to this headline">¶</a></h1>
<p>This tutorial describes how to launch Windows as a Guest (WaaG) VM on the ACRN hypervisor.</p>
<div class="section" id="hardware-setup">
<h2>Hardware setup<a class="headerlink" href="#hardware-setup" title="Permalink to this headline">¶</a></h2>
<p>The following Intel Kaby Lake NUCs are verified:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Platform Model</th>
<th class="head">BIOS Version</th>
<th class="head">BIOS Download Link</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NUC7i7DNHE</td>
<td>DNKBLi7v.86A.0052.2018.0808.1344</td>
<td><a class="reference external" href="https://downloadcenter.intel.com/download/28886?v=t">link</a></td>
</tr>
<tr class="row-odd"><td>NUC7i5DNHE</td>
<td>DNKBLi5v.86A.0060.2018.1220.1536</td>
<td><a class="reference external" href="https://downloadcenter.intel.com/download/28885?v=t">link</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="acrn-service-vm-setup">
<h2>ACRN Service VM Setup<a class="headerlink" href="#acrn-service-vm-setup" title="Permalink to this headline">¶</a></h2>
<p>You may refer to the steps in <a class="reference internal" href="../getting-started/apl-nuc.html#getting-started-apl-nuc"><span class="std std-ref">Getting started guide for Intel NUC</span></a> for
Intel NUC to set up ACRN on the KBL NUC. After following the steps in that guide,
you should be able to launch the Service VM successfully.</p>
</div>
<div class="section" id="setup-for-using-windows-as-guest-vm">
<h2>Setup for Using Windows as Guest VM<a class="headerlink" href="#setup-for-using-windows-as-guest-vm" title="Permalink to this headline">¶</a></h2>
<p>All the patches to support WaaG have been upstreamed; you can download them
from the acrn-hypervisor repository.</p>
<div class="section" id="build-acrn-efi-images">
<h3>Build ACRN EFI Images<a class="headerlink" href="#build-acrn-efi-images" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Follow the steps described at <a class="reference internal" href="../getting-started/building-from-source.html#getting-started-building"><span class="std std-ref">Build ACRN from Source</span></a> to set up the build environment.</p>
</li>
<li><p class="first">Use the <code class="docutils literal notranslate"><span class="pre">make</span></code> command to compile the <code class="docutils literal notranslate"><span class="pre">acrn.efi</span></code> and <code class="docutils literal notranslate"><span class="pre">acrn-dm</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/projectacrn/acrn-hypervisor.git
$ cd acrn-hypervisor
$ make FIRMWARE=uefi BOARD=kbl-nuc-i7
</pre></div>
</div>
</li>
<li><p class="first">Get the outputs from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ build/hypervisor/acrn.efi
$ build/devicemodel/acrn-dm
</pre></div>
</div>
</li>
<li><p class="first">Replace the <code class="docutils literal notranslate"><span class="pre">acrn.efi</span></code> and <code class="docutils literal notranslate"><span class="pre">acrn-dm</span></code> on your NUC:</p>
<ol class="loweralpha">
<li><p class="first">Log in to the ACRN Service VM and then <code class="docutils literal notranslate"><span class="pre">mount</span></code> the EFI partition to <code class="docutils literal notranslate"><span class="pre">/boot</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">scp</span></code> the <code class="docutils literal notranslate"><span class="pre">acrn.efi</span></code> and <code class="docutils literal notranslate"><span class="pre">acrn-dm</span></code> from your host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># scp &lt;acrn.efi from your host&gt; /boot/EFI/acrn/</span>
<span class="c1"># scp &lt;acrn-dm from your host&gt; /usr/bin/</span>
<span class="c1"># chmod +x /usr/bin/acrn-dm &amp;&amp; sync</span>
</pre></div>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="build-service-vm-kernel">
<h3>Build Service VM Kernel<a class="headerlink" href="#build-service-vm-kernel" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Follow the steps described at <a class="reference internal" href="../getting-started/building-from-source.html#getting-started-building"><span class="std std-ref">Build ACRN from Source</span></a> to set up the build environment.</p>
</li>
<li><p class="first">Follow the steps below to build the ACRN kernel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ WORKDIR=`pwd`;
$ JOBS=`nproc`
$ git clone -b master https://github.com/projectacrn/acrn-kernel.git
$ cd acrn-kernel &amp;&amp; mkdir -p ${WORKDIR}/{build,build-rootfs}
$ cp kernel_config_uefi_sos ${WORKDIR}/build/.config
$ make olddefconfig O=${WORKDIR}/build &amp;&amp; make -j${JOBS} O=${WORKDIR}/build
$ make modules_install INSTALL_MOD_PATH=${WORKDIR}/build-rootfs O=${WORKDIR}/build -j${JOBS}
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="update-kernel-on-kbl-nuc">
<h3>Update Kernel on KBL NUC<a class="headerlink" href="#update-kernel-on-kbl-nuc" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Copy the new kernel image (bzImage) and its modules to the target machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># scp &lt;your host&gt;:$WORKDIR/build/arch/x86/boot/bzImage /boot/bzImage</span>
<span class="c1"># scp -r &lt;your host&gt;:$WORKDIR/build-rootfs/lib/modules/* /lib/modules/</span>
<span class="c1"># cp /boot/loader/entries/acrn.conf  /boot/loader/entries/acrngt.conf</span>
</pre></div>
</div>
</li>
<li><p class="first">Modify <code class="docutils literal notranslate"><span class="pre">acrngt.conf</span></code> to the content as given below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>title The ACRNGT Service VM
linux /bzImage
options console=tty0 console=ttyS0 root=/dev/sda3 rw rootwait ignore_loglevel no_timer_check consoleblank=0 i915.nuclear_pageflip=1 i915.avail_planes_per_pipe=0x010101 i915.domain_plane_owners=0x011100001111 i915.enable_gvt=1 i915.enable_conformance_check=0 i915.enable_guc=0 hvlog=2M@0x1FE00000
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Change <code class="docutils literal notranslate"><span class="pre">/dev/sda3</span></code> to your file system partition.</p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">reboot</span></code> the Service VM and select <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">ACRNGT</span> <span class="pre">Service</span> <span class="pre">VM</span></code> from the boot menu to apply
the ACRN kernel and hypervisor updates.</p>
</li>
</ol>
</div>
<div class="section" id="create-windows-10-image">
<h3>Create Windows 10 Image<a class="headerlink" href="#create-windows-10-image" title="Permalink to this headline">¶</a></h3>
<p>Create a Windows 10 image which includes two steps:</p>
<ol class="arabic simple">
<li>Re-generate an ISO that includes virtio-win drivers and the Windows graphics drivers that were pre-installed
from the original Windows ISO.</li>
<li>Install Windows 10 onto the virtual disk.</li>
</ol>
<div class="section" id="preparations">
<h4>Preparations<a class="headerlink" href="#preparations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Download <a class="reference external" href="https://docs.microsoft.com/en-us/windows-hardware/get-started/adk-install">Windows 10 ADK</a>
according to your working Windows 10 version.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><kbd class="kbd docutils literal notranslate">Win</kbd> + <kbd class="kbd docutils literal notranslate">R</kbd> to open the Run window. Key in <code class="docutils literal notranslate"><span class="pre">winver</span></code> to get your working Windows version.</p>
</div>
<ul class="simple">
<li>Download <a class="reference external" href="https://software-download.microsoft.com/download/sg/17763.107.101029-1455.rs5_release_svc_refresh_CLIENT_LTSC_EVAL_x64FRE_en-us.iso">Windows 10 LTSC ISO</a>.</li>
<li>Download <a class="reference external" href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/virtio-win-0.1.141-1/virtio-win-0.1.141.iso">virtio Windows driver</a>
to the Service VM in <code class="docutils literal notranslate"><span class="pre">/root/img/virtio-win-0.1.141.iso</span></code>.</li>
<li>Download <a class="reference external" href="https://downloadmirror.intel.com/28148/a08/dch_win64_25.20.100.6444.exe">Intel DCH Graphics Driver</a>.</li>
</ul>
</div>
<div class="section" id="install-windows-10-adk">
<h4>Install Windows 10 ADK<a class="headerlink" href="#install-windows-10-adk" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Double click <code class="docutils literal notranslate"><span class="pre">adksetup.exe</span></code> to start the installation.</p>
<div class="figure align-center">
<img alt="../_images/adk_install_1.png" src="../_images/adk_install_1.png" />
</div>
</li>
<li><p class="first">Click <code class="docutils literal notranslate"><span class="pre">Next</span></code>.</p>
<div class="figure align-center">
<img alt="../_images/adk_install_2.png" src="../_images/adk_install_2.png" />
</div>
</li>
<li><p class="first">Select <code class="docutils literal notranslate"><span class="pre">Deployment</span> <span class="pre">Tools</span></code> and <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">Preinstallation</span> <span class="pre">Environment</span> <span class="pre">(Windows</span> <span class="pre">PE)</span></code>,
and click <code class="docutils literal notranslate"><span class="pre">Install</span></code> to continue the installation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need to install Windows 10 ADK only once.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="pre-install-drivers-and-re-generate-windows-iso">
<h4>Pre-install drivers and re-generate Windows ISO<a class="headerlink" href="#pre-install-drivers-and-re-generate-windows-iso" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Create a folder on the <code class="docutils literal notranslate"><span class="pre">C:</span></code> drive called <code class="docutils literal notranslate"><span class="pre">WIM</span></code>, so you have a folder <code class="docutils literal notranslate"><span class="pre">C:\WIM</span></code></p>
</li>
<li><p class="first">Create a folder on the <code class="docutils literal notranslate"><span class="pre">C:</span></code> drive called <code class="docutils literal notranslate"><span class="pre">Mount</span></code>, so you have a folder <code class="docutils literal notranslate"><span class="pre">C:\Mount</span></code></p>
</li>
<li><p class="first">Right click the downloaded <code class="docutils literal notranslate"><span class="pre">virtio-win-0.1.141.iso</span></code> and select <code class="docutils literal notranslate"><span class="pre">Mount</span></code>. The ISO will be mounted to a drive;
for example, drive <code class="docutils literal notranslate"><span class="pre">D:</span></code></p>
</li>
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">7-zip</span></code> or similar utility to unzip the downloaded Windows graphics driver
<code class="docutils literal notranslate"><span class="pre">dch_win64_25.20.100.6444.exe</span></code> to a folder,
for example, to <code class="docutils literal notranslate"><span class="pre">C:\Dev\Temp\wim\dch_win64_25.20.100.6444</span></code></p>
</li>
<li><p class="first">Right click the downloaded Windows ISO, for example, <code class="docutils literal notranslate"><span class="pre">windows10-17763-107-LTSC.iso</span></code>, select <code class="docutils literal notranslate"><span class="pre">Mount</span></code>,
the ISO will be mounted to a drive; for example, drive <code class="docutils literal notranslate"><span class="pre">E:</span></code></p>
</li>
<li><p class="first">Copy <code class="docutils literal notranslate"><span class="pre">E:\sources\boot.wim</span></code> and <code class="docutils literal notranslate"><span class="pre">E:\sources\install.wim</span></code> to <code class="docutils literal notranslate"><span class="pre">C:\WIM</span></code></p>
</li>
<li><p class="first">Depending on your Windows ISO image, more than one image may be included in the <code class="docutils literal notranslate"><span class="pre">WIM</span></code>.
Run <code class="docutils literal notranslate"><span class="pre">dism</span> <span class="pre">/get-wiminfo</span> <span class="pre">/wimfile:C:\WIM\install.wim</span></code> with administrator privileges.
Select the <code class="docutils literal notranslate"><span class="pre">Index</span></code> you want. For <code class="docutils literal notranslate"><span class="pre">windows10-17763-107-LTSC.iso</span></code>,
there is only one <code class="docutils literal notranslate"><span class="pre">Index</span></code>; it is <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<div class="figure align-center">
<img alt="../_images/install_wim_index.png" src="../_images/install_wim_index.png" />
</div>
</li>
<li><p class="first">Create a batch file named <code class="docutils literal notranslate"><span class="pre">virtio-inject-boot.bat</span></code> <a class="footnote-reference" href="#id3" id="id1">[1]</a> to modify
<code class="docutils literal notranslate"><span class="pre">boot.wim</span></code> to inject drivers (using the mounted Windows ISO drive
(<code class="docutils literal notranslate"><span class="pre">D:</span></code>), image Index (<code class="docutils literal notranslate"><span class="pre">1</span></code>), and folder where the unzipped Windows
graphics drivers were placed, from the previous steps (update this
batch file as needed):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REM</span> <span class="n">virt</span><span class="o">-</span><span class="n">inject</span><span class="o">-</span><span class="n">boot</span>
<span class="n">Set</span> <span class="n">IDX</span><span class="o">=</span><span class="mi">1</span>

<span class="n">REM</span> <span class="n">Modify</span> <span class="n">boot</span><span class="o">.</span><span class="n">wim</span> <span class="n">file</span> <span class="n">to</span> <span class="n">inject</span> <span class="n">drivers</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">Mount</span><span class="o">-</span><span class="n">Wim</span> <span class="o">/</span><span class="n">WimFile</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">Wim</span>\<span class="n">boot</span><span class="o">.</span><span class="n">wim</span> <span class="o">/</span><span class="n">Index</span><span class="p">:</span><span class="o">%</span><span class="n">IDX</span><span class="o">%</span> <span class="o">/</span><span class="n">MountDir</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\b</span><span class="s2">alloon\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\b</span><span class="s2">alloon.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:\NetKVM\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\n</span><span class="s2">etkvm.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">iorng\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">iorng.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">ioscsi\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">ioscsi.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">ioserial\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">ioser.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">iostor\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">iostor.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">ioinput\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">ioinput.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\cui_dch.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\HdBusExt.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\iigd_dch.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\IntcDAud.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\msdk.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">unmount</span><span class="o">-</span><span class="n">wim</span> <span class="o">/</span><span class="n">mountdir</span><span class="p">:</span><span class="n">c</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">commit</span>
</pre></div>
</div>
<p>Run this <code class="docutils literal notranslate"><span class="pre">virtio-inject-boot.bat</span></code> script in a command prompt
running as administrator.  It may take 4-5 minutes to run, depending on
your Windows system performance.</p>
</li>
<li><p class="first">Similarly, create another batch file named
<code class="docutils literal notranslate"><span class="pre">virtio-inject-install.bat</span></code> <a class="footnote-reference" href="#id3" id="id2">[1]</a> to modify <code class="docutils literal notranslate"><span class="pre">install.wim</span></code> to inject
drivers (and verify the ISO drive, image Index, and drivers folder):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REM</span> <span class="n">virt</span><span class="o">-</span><span class="n">inject</span><span class="o">-</span><span class="n">install</span>
<span class="n">Set</span> <span class="n">IDX</span><span class="o">=</span><span class="mi">1</span>

<span class="n">REM</span> <span class="n">Modify</span> <span class="n">install</span><span class="o">.</span><span class="n">wim</span> <span class="n">to</span> <span class="n">inject</span> <span class="n">drivers</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">Mount</span><span class="o">-</span><span class="n">Wim</span> <span class="o">/</span><span class="n">WimFile</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">WIM</span>\<span class="n">install</span><span class="o">.</span><span class="n">wim</span> <span class="o">/</span><span class="n">Index</span><span class="p">:</span><span class="o">%</span><span class="n">IDX</span><span class="o">%</span> <span class="o">/</span><span class="n">MountDir</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\b</span><span class="s2">alloon\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\b</span><span class="s2">alloon.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:\NetKVM\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\n</span><span class="s2">etkvm.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">iorng\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">iorng.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">ioscsi\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">ioscsi.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">ioserial\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">ioser.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">iostor\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">iostor.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:d:</span><span class="se">\v</span><span class="s2">ioinput\w10</span><span class="se">\a</span><span class="s2">md64</span><span class="se">\v</span><span class="s2">ioinput.inf&quot;</span> <span class="o">/</span><span class="n">forceunsigned</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\cui_dch.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\HdBusExt.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\iigd_dch.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\IntcDAud.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">image</span><span class="p">:</span><span class="n">C</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">Add</span><span class="o">-</span><span class="n">Driver</span> <span class="s2">&quot;/driver:c:\Dev\Temp\wim\dch_win64_25.20.100.6444\Graphics\msdk.inf&quot;</span>
<span class="n">dism</span> <span class="o">/</span><span class="n">unmount</span><span class="o">-</span><span class="n">wim</span> <span class="o">/</span><span class="n">mountdir</span><span class="p">:</span><span class="n">c</span><span class="p">:</span>\<span class="n">mount</span> <span class="o">/</span><span class="n">commit</span>
</pre></div>
</div>
<p>Run this script in a command prompt running as administrator.  It may also
take 4-5 minutes to run, depending on your Windows system performance.</p>
</li>
<li><p class="first">After running these two scripts the files <code class="docutils literal notranslate"><span class="pre">C:\WIM\boot.wim</span></code> and <code class="docutils literal notranslate"><span class="pre">C:\WIM\install.wim</span></code>
will be updated to install these drivers into the image:</p>
<ul class="simple">
<li>Virtio-balloon</li>
<li>Virtio-net</li>
<li>Virtio-rng</li>
<li>Virtio-scsi</li>
<li>Virtio-serial</li>
<li>Virtio-block</li>
<li>Virtio-input</li>
<li>Windows graphics drivers</li>
</ul>
</li>
<li><p class="first">Use 7-zip to unzip the downloaded Windows ISO to a folder; for example, into
<code class="docutils literal notranslate"><span class="pre">C:\Dev\Temp\wim\windows10-17763-107-LTSC</span></code></p>
</li>
<li><p class="first">Delete <code class="docutils literal notranslate"><span class="pre">C:\Dev\Temp\wim\windows10-17763-107-LTSC\sources\boot.wim</span></code> and
<code class="docutils literal notranslate"><span class="pre">C:\Dev\Temp\wim\windows10-17763-107-LTSC\sources\install.wim</span></code></p>
</li>
<li><p class="first">Copy <code class="docutils literal notranslate"><span class="pre">C:\WIM\boot.wim</span></code> and <code class="docutils literal notranslate"><span class="pre">C:\WIM\install.wim</span></code> to <code class="docutils literal notranslate"><span class="pre">C:\Dev\Temp\wim\windows10-17763-107-LTSC\sources</span></code></p>
</li>
<li><p class="first">Download and unzip <a class="reference external" href="http://reboot.pro/index.php?app=core&amp;module=attach&amp;section=attach&amp;attach_id=15214">cdrtools-3.01.a23-bootcd.ru-mkisofs.7z</a> to a folder;
for example, to <code class="docutils literal notranslate"><span class="pre">C:\Dev\Temp\wim\cdrtools-3.01.a23-bootcd.ru-mkisofs</span></code></p>
</li>
<li><p class="first">Create a batch file named <code class="docutils literal notranslate"><span class="pre">mkisofs_both_legacy_and_uefi.bat</span></code>
containing (update folder names as needed to reflect where the
referenced files are located on your system, and <code class="docutils literal notranslate"><span class="pre">inputdir</span></code>,
<code class="docutils literal notranslate"><span class="pre">outputiso</span></code> and <code class="docutils literal notranslate"><span class="pre">mkisofs.exe</span></code> path, downloaded by the previous
step):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">inputdir</span><span class="o">=</span><span class="n">C</span><span class="p">:</span>\<span class="n">Dev</span>\<span class="n">Temp</span>\<span class="n">wim</span>\<span class="n">windows10</span><span class="o">-</span><span class="mi">17763</span><span class="o">-</span><span class="mi">107</span><span class="o">-</span><span class="n">LTSC</span>
<span class="nb">set</span> <span class="n">outputiso</span><span class="o">=</span><span class="n">C</span><span class="p">:</span>\<span class="n">Dev</span>\<span class="n">Temp</span>\<span class="n">wim</span>\<span class="n">mkisofs_iso</span>\<span class="n">windows10</span><span class="o">-</span><span class="mi">17763</span><span class="o">-</span><span class="mi">107</span><span class="o">-</span><span class="n">LTSC</span><span class="o">-</span><span class="n">Virtio</span><span class="o">-</span><span class="n">Gfx</span><span class="o">.</span><span class="n">iso</span>
<span class="nb">set</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;WIN10_17763_107_LTSC_VIRTIO_GFX&quot;</span>
<span class="nb">set</span> <span class="n">biosboot</span><span class="o">=</span><span class="n">boot</span><span class="o">/</span><span class="n">etfsboot</span><span class="o">.</span><span class="n">com</span>
<span class="nb">set</span> <span class="n">efiboot</span><span class="o">=</span><span class="n">efi</span><span class="o">/</span><span class="n">microsoft</span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">efisys</span><span class="o">.</span><span class="n">bin</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Dev</span>\<span class="n">Temp</span>\<span class="n">wim</span>\<span class="n">cdrtools</span><span class="o">-</span><span class="mf">3.01</span><span class="o">.</span><span class="n">a23</span><span class="o">-</span><span class="n">bootcd</span><span class="o">.</span><span class="n">ru</span><span class="o">-</span><span class="n">mkisofs</span>\<span class="n">mingw</span>\<span class="n">mkisofs</span><span class="o">.</span><span class="n">exe</span> \
  <span class="o">-</span><span class="n">iso</span><span class="o">-</span><span class="n">level</span> <span class="mi">4</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">R</span> <span class="o">-</span><span class="n">UDF</span> <span class="o">-</span><span class="n">D</span> <span class="o">-</span><span class="n">volid</span> <span class="o">%</span><span class="n">label</span><span class="o">%</span> <span class="o">-</span><span class="n">b</span> <span class="o">%</span><span class="n">biosboot</span><span class="o">%</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">emul</span><span class="o">-</span><span class="n">boot</span> \
  <span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">load</span><span class="o">-</span><span class="n">size</span> <span class="mi">8</span> <span class="o">-</span><span class="n">hide</span> <span class="n">boot</span><span class="o">.</span><span class="n">catalog</span> <span class="o">-</span><span class="n">eltorito</span><span class="o">-</span><span class="n">alt</span><span class="o">-</span><span class="n">boot</span> \
  <span class="o">-</span><span class="n">eltorito</span><span class="o">-</span><span class="n">platform</span> <span class="n">efi</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">emul</span><span class="o">-</span><span class="n">boot</span> <span class="o">-</span><span class="n">b</span> <span class="o">%</span><span class="n">efiboot</span><span class="o">%</span>  <span class="o">-</span><span class="n">o</span> <span class="o">%</span><span class="n">outputiso</span><span class="o">%</span> \
  <span class="o">%</span><span class="n">inputdir</span><span class="o">%</span>
</pre></div>
</div>
<p>Run this <code class="docutils literal notranslate"><span class="pre">mkisofs_both_legacy_and_uefi.bat</span></code> script. The resulting
ISO will be generated in <code class="docutils literal notranslate"><span class="pre">outputiso</span></code> location you specified.</p>
</li>
</ol>
</div>
<div class="section" id="create-raw-disk">
<h4>Create Raw Disk<a class="headerlink" href="#create-raw-disk" title="Permalink to this headline">¶</a></h4>
<p>Run these commands on the Service VM:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># swupd bundle-add kvm-host</span>
<span class="c1"># mkdir /root/img</span>
<span class="c1"># cd /root/img</span>
<span class="c1"># qemu-img create -f raw win10-ltsc-virtio.img 30G</span>
</pre></div>
</div>
</div>
<div class="section" id="install-windows-10">
<h4>Install Windows 10<a class="headerlink" href="#install-windows-10" title="Permalink to this headline">¶</a></h4>
<p>Currently, the ACRNGT OVMF GOP driver is not ready; thus, a special VGA
version is used to install Windows 10 on ACRN from scratch. The
<code class="docutils literal notranslate"><span class="pre">acrn.elf</span></code>, <code class="docutils literal notranslate"><span class="pre">acrn-dm</span></code> and <code class="docutils literal notranslate"><span class="pre">OVMF</span></code> binaries are included in the
<a class="reference external" href="https://raw.githubusercontent.com/projectacrn/acrn-hypervisor/master/doc/tutorials/install_by_vga_gsg.tar.gz">tarball</a>
together with the script used to install Windows 10.</p>
<ol class="arabic">
<li><p class="first">Uncompress <code class="docutils literal notranslate"><span class="pre">install_by_vga_gsg.tar.gz</span></code> to the Service VM:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># tar zxvf install_by_vga_gsg.tar.gz &amp;&amp; cd install_by_vga_gsg</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit the <code class="docutils literal notranslate"><span class="pre">acrn-dm</span></code> command line in <code class="docutils literal notranslate"><span class="pre">install_vga.sh</span></code> if your configuration is different.</p>
<ul class="simple">
<li>Change <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">3,virtio-blk,./win10-ltsc-virtio.img</span></code> to your path to the Windows 10 image.</li>
<li>Change <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">8,ahci,cd:./windows10-17763-107-LTSC-Virtio-Gfx.iso</span></code> to the ISO you re-generated above.</li>
<li>Change <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">9,ahci,cd:./virtio-win-0.1.141.iso</span></code> to your path to the virtio-win iso.</li>
</ul>
</li>
<li><p class="first">Run <code class="docutils literal notranslate"><span class="pre">install_vga.sh</span></code> and connect to the Windows guest using a vnc client.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># vncviewer &lt;IP-OF-HOST-MACHINE&gt;:5900</span>
</pre></div>
</div>
</li>
<li><p class="first">Input <code class="docutils literal notranslate"><span class="pre">exit</span></code> followed by <kbd class="kbd docutils literal notranslate">ENTER</kbd></p>
<div class="figure align-center">
<img alt="../_images/windows_install_1.png" src="../_images/windows_install_1.png" />
</div>
</li>
<li><p class="first">Select <code class="docutils literal notranslate"><span class="pre">Boot</span> <span class="pre">Manager</span></code></p>
<div class="figure align-center">
<img alt="../_images/windows_install_2.png" src="../_images/windows_install_2.png" />
</div>
</li>
<li><p class="first">Select <code class="docutils literal notranslate"><span class="pre">UEFI</span> <span class="pre">ACRN-DM</span> <span class="pre">SATA</span> <span class="pre">DVD</span> <span class="pre">ROM</span> <span class="pre">ACRN--F9B7-5503-A05B</span></code>, which is using the PCI slot 7.
This is what we configured in the script for the Windows ISO cdrom.</p>
<div class="figure align-center">
<img alt="../_images/windows_install_3.png" src="../_images/windows_install_3.png" />
</div>
</li>
<li><p class="first">Select <kbd class="kbd docutils literal notranslate">ENTER</kbd> followed by any key press to be prompted to the Windows installation screen.</p>
<div class="figure align-center">
<img alt="../_images/windows_install_4.png" src="../_images/windows_install_4.png" />
</div>
<div class="figure align-center">
<img alt="../_images/windows_install_5.png" src="../_images/windows_install_5.png" />
</div>
<div class="figure align-center">
<img alt="../_images/windows_install_6.png" src="../_images/windows_install_6.png" />
</div>
<div class="figure align-center">
<img alt="../_images/windows_install_7.png" src="../_images/windows_install_7.png" />
</div>
<div class="figure align-center">
<img alt="../_images/windows_install_8.png" src="../_images/windows_install_8.png" />
</div>
</li>
<li><p class="first">Connect again after Windows guest reboots. Use <code class="docutils literal notranslate"><span class="pre">vncviewer</span> <span class="pre">&lt;IP-OF-HOST-MACHINE&gt;:5900</span></code>.</p>
<div class="figure align-center">
<img alt="../_images/windows_install_9.png" src="../_images/windows_install_9.png" />
</div>
</li>
<li><p class="first">Connect again after Windows guest reboots a second time. Use <code class="docutils literal notranslate"><span class="pre">vncviewer</span> <span class="pre">&lt;IP-OF-HOST-MACHINE&gt;:5900</span></code>.</p>
<div class="figure align-center">
<img alt="../_images/windows_install_10.png" src="../_images/windows_install_10.png" />
</div>
</li>
<li><p class="first">Perform a few configuration steps. The Windows desktop appears.</p>
<div class="figure align-center">
<img alt="../_images/windows_install_11.png" src="../_images/windows_install_11.png" />
</div>
<div class="figure align-center">
<img alt="../_images/windows_install_12.png" src="../_images/windows_install_12.png" />
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="boot-windows-with-gvt-g-on-acrn">
<h3>Boot Windows with GVT-g on ACRN<a class="headerlink" href="#boot-windows-with-gvt-g-on-acrn" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Modify the <code class="docutils literal notranslate"><span class="pre">/usr/share/acrn/samples/nuc/launch_win.sh</span></code> script to specify the Windows image generated above.</p>
</li>
<li><p class="first">Download <a class="reference external" href="https://raw.githubusercontent.com/projectacrn/acrn-hypervisor/master/doc/tutorials/OVMF.fd">OVMF.fd</a>
binary to the directory in Service VM: <code class="docutils literal notranslate"><span class="pre">/usr/share/acrn/samples/nuc/</span></code>.</p>
</li>
<li><p class="first">Run the <code class="docutils literal notranslate"><span class="pre">launch_win.sh</span></code> and you should see the WaaG desktop coming up over the HDMI monitor (instead of the VNC).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Use the following command to disable the GNOME Display Manager (GDM) if it is enabled:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sudo systemctl mask gdm.service</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must connect two monitors to the KBL NUC in order to launch Windows with
the default configurations above.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The second monitor must include the Weston desktop. If you have set up Weston in the Service VM,
follow the steps in <a class="reference internal" href="skl-nuc.html#skl-nuc-gpu-passthrough"><span class="std std-ref">GPU Passthrough on Skylake NUC</span></a> to set up Weston as
the desktop environment in Service VM in order to experience Windows with the AcrnGT local display feature.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="acrn-windows-verified-feature-list">
<h2>ACRN Windows verified feature list<a class="headerlink" href="#acrn-windows-verified-feature-list" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Windows 10 Version:<ul>
<li>Microsoft Windows 10 Enterprise, 10.0.17134 Build 17134</li>
<li>Microsoft Windows 10 Pro, 10.0.17763 Build 17763</li>
</ul>
</li>
<li>Windows graphics driver:<ul>
<li>dch_win64_25.20.100.6444.exe</li>
</ul>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Items</th>
<th class="head">Details</th>
<th class="head">Status</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IO Devices</td>
<td>Virtio block as the boot device</td>
<td>Working</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>AHCI as the boot device</td>
<td>Working</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>AHCI cdrom</td>
<td>Working</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Virtio network</td>
<td>Working</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Virtio input - mouse</td>
<td>Working</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Virtio input - keyboard</td>
<td>Working</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>GOP &amp; VNC remote display</td>
<td>Working</td>
</tr>
<tr class="row-odd"><td>GVT-g</td>
<td>GVT-g without local display</td>
<td>Working with 3D benchmark</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>GVT-g&nbsp; with local display</td>
<td>Working with 3D benchmark</td>
</tr>
<tr class="row-odd"><td>Tools</td>
<td>WinDbg</td>
<td>Working</td>
</tr>
<tr class="row-even"><td>Test cases</td>
<td>Install Windows 10 from scratch</td>
<td>OK</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Windows reboot</td>
<td>OK</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Windows shutdown</td>
<td>OK</td>
</tr>
<tr class="row-odd"><td>Built-in Apps</td>
<td>Microsoft Edge</td>
<td>OK</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Maps</td>
<td>OK</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Microsoft Store</td>
<td>OK</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>3D Viewer</td>
<td>OK</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="known-limitations">
<h2>Known Limitations<a class="headerlink" href="#known-limitations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The cursor is not visible with the GVG-g local display.</li>
<li>The Windows graphic driver version must be <code class="docutils literal notranslate"><span class="pre">dch_win64_25.20.100.6444.exe</span></code>;
the latest version <code class="docutils literal notranslate"><span class="pre">dch_win64_25.20.100.6577.exe</span></code> cannot be installed correctly.</li>
</ul>
</div>
<div class="section" id="device-configurations-of-acrn-dm-command-line">
<h2>Device configurations of acrn-dm command line<a class="headerlink" href="#device-configurations-of-acrn-dm-command-line" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><em>-s 3,ahci,hd:/root/img/win10.img</em>:
This is the hard disk onto which to install Windows 10.
Make sure that the slot ID 3 points to your win10 img path.</p>
</li>
<li><p class="first"><em>-s 4,virtio-net,tap0</em>:
This is for the network virtualization.</p>
</li>
<li><p class="first"><em>-s 5,fbuf,tcp=0.0.0.0:5900,w=800,h=600</em>:
This will open a port 5900 on Service VM which can be connected to via vncviewer.</p>
</li>
<li><p class="first"><em>-s 6,virtio-input,/dev/input/event4</em>:
This is to passthrough the mouse/keyboard to Windows via virtio.
Please change <code class="docutils literal notranslate"><span class="pre">event4</span></code> accordingly. You can use the following command to check
the event node on your Service VM:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">To</span> <span class="n">get</span> <span class="n">the</span> <span class="nb">input</span> <span class="n">event</span> <span class="n">of</span> <span class="n">mouse</span><span class="o">&gt;</span>
<span class="c1"># cat /proc/bus/input/devices | grep mouse</span>
</pre></div>
</div>
</li>
<li><p class="first"><em>-s 7,ahci,cd:/root/img/Windows.iso</em>:
This is the IOS image used to install Windows 10. It appears as a cdrom device.
Make sure that the slot ID 7 points to your win10 ISO path.</p>
</li>
<li><p class="first"><em>-s 8,ahci,cd:/root/img/virtio-win-0.1.141.iso</em>: This is another cdrom device
to install the virtio Windows driver later. Make sure it points to your VirtIO ISO path.</p>
</li>
<li><p class="first"><em>–ovmf /root/bios/OVMF.fd</em>:
Make sure it points to your OVMF binary path</p>
</li>
</ul>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> These virtio drivers injecting batch script are based on Derek Seaman’s IT blog about
<a class="reference external" href="https://www.derekseaman.com/2015/07/injecting-kvm-virtio-drivers-into-windows.html">injecting VirtIO Drivers into Windows</a>.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>

          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Project ACRN
      <span class="lastupdated">
        Last updated on Aug 02, 2019.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>